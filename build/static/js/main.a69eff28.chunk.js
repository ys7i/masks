(this.webpackJsonpmasks=this.webpackJsonpmasks||[]).push([[0],{37:function(e,l,r){},45:function(e,l,r){"use strict";r.r(l);var t=r(7),n=r.n(t),u=r(31),o=r.n(u),c=(r(37),r(24)),a=r(9),i=r(11),b=r(16),s=r(8),d=r(47),j=r(12);function O(e){var l=Object(t.useRef)(),r=Object(d.a)("/redTurn.glb"),n=r.nodes,u=r.materials;return Object(j.jsx)("group",Object(s.a)(Object(s.a)({ref:l},e),{},{dispose:null,children:Object(j.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Red002.geometry,material:u["Material.006"],"material-color":"red"===e.color?16711680:255,scale:.09,rotation:"red"===e.color?[0,Math.PI,0]:[0,0,0]})}))}d.a.preload("/redTurn.glb");var f=r(4);function p(e){var l=Object(t.useRef)(),r=Object(d.a)("/Masks.glb").nodes;return Object(j.jsx)("group",Object(s.a)(Object(s.a)({ref:l},e),{},{dispose:null,children:Object(j.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Plane002.geometry,material:"red"===e.color?new f.MeshStandardMaterial({color:16711680,roughness:.5}):new f.MeshStandardMaterial({color:255,roughness:.5}),scale:[4,1,2],rotation:"blue"===e.color?[0,Math.PI,0]:[0,0,0]})}))}d.a.preload("/Masks.glb");var v=function(e){var l=e.color,r=e.size,n=e.location.slice();return n[1]=2===r?.05:1===r?.02:0,Object(a.b)(t.Suspense,{fallback:null},Object(a.b)(p,{scale:2===r?.1:1===r?.07:.04,position:"red"===l||"blue"===l?[n[0],n[1],n[2]]:[n[0],n[1]+.3,n[2]],color:"red"===l||"selectedRed"===l?"red":"blue"}))};function h(e){var l=Object(t.useRef)(),r=Object(d.a)("/square.glb"),n=r.nodes,u=r.materials;return Object(j.jsx)("group",Object(s.a)(Object(s.a)({ref:l},e),{},{dispose:null,onClick:function(){e.clickMethod(e.me,e.place)},children:Object(j.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube002.geometry,material:u["Material.013"]})}))}d.a.preload("/square.glb");var M,g=function(e){var l=e.situation,r=e.place,t=e.clickMethod,u=e.aboutMe,o=e.position,c=function(e){if(null!==l[e]){var r=l[e];return Object(a.b)(v,{color:r,size:e,location:o})}};return Object(a.b)(n.a.Suspense,{fallback:null},Object(a.b)(h,{position:[o[0],o[1],o[2]],scale:"onBoard"===u?.0128:.008,clickMethod:t,place:String(r),me:u}),c(0),c(1),c(2))},m=[[-.65,0,-.65],[0,0,-.65],[.65,0,-.65],[-.65,0,0],[0,0,0],[.65,0,0],[-.65,0,.65],[0,0,.65],[.65,0,.65]],y=function(e){var l=e.situation,r=e.clickMethod,t=function(e){return Object(a.b)(g,{situation:l[e],clickMethod:r,place:e,aboutMe:"onBoard",position:m[e]})};return Object(a.b)(n.a.Suspense,{fallback:null},t(0),t(1),t(2),t(3),t(4),t(5),t(6),t(7),t(8))},S={redTerritory:[[-1,0,-1.25],[-.6,0,-1.25],[-.2,0,-1.25],[.2,0,-1.25],[.6,0,-1.25],[1,0,-1.25]],blueTerritory:[[1,0,1.25],[.6,0,1.25],[.2,0,1.25],[-.2,0,1.25],[-.6,0,1.25],[-1,0,1.25]],onBoard:[]},k=function(e){var l=e.handled,r=e.aboutMe,t=e.clickMethod,u=function(e,l){return Object(a.b)(g,{situation:e,place:l,clickMethod:t,aboutMe:r,position:S[r][l]})};return Object(a.b)(n.a.Suspense,{fallback:null},u([null,null,l[5]],5),u([null,null,l[4]],4),u([null,l[3],null],3),u([null,l[2],null],2),u([l[1],null,null],1),u([l[0],null,null],0))};function T(e){var l=Object(t.useRef)({});Object(b.b)((function(){l.current.rotation.x+=.01}));var r=Object(d.a)("/ring.glb"),n=r.nodes,u=r.materials;return Object(j.jsx)("group",Object(s.a)(Object(s.a)({ref:l},e),{},{dispose:null,children:Object(j.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Torus002.geometry,material:u["Material.012"],"material-color":"red"===e.color?16711680:"blue"===e.color?255:12237498,scale:[2.96,1.13,1.13]})}))}function w(e){var l=Object(t.useRef)(),r=Object(d.a)("/win.glb").nodes;return Object(j.jsx)("group",Object(s.a)(Object(s.a)({ref:l},e),{},{dispose:null,children:Object(j.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Red001.geometry,material:"red"===e.color?new f.MeshStandardMaterial({color:16711680}):new f.MeshStandardMaterial({color:255}),rotation:"red"===e.color?[0,Math.PI,0]:[0,0,0],scale:.08})}))}d.a.preload("/ring.glb"),d.a.preload("/win.glb");var x,B=Object(a.a)(M||(M=Object(c.a)(["\n  margin: 0 auto;\n  display: grid;\n  place-items: center;\n  width: max(360px, 100%);\n  height: max(610px, 100%);\n"]))),R=function(){var e=Object(t.useState)([[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null]]),l=Object(i.a)(e,2),r=l[0],u=l[1],o=Object(t.useState)(["red","red","red","red","red","red"]),c=Object(i.a)(o,2),s=c[0],d=c[1],j=Object(t.useState)(["blue","blue","blue","blue","blue","blue"]),f=Object(i.a)(j,2),p=f[0],v=f[1],h=Object(t.useState)("red"),M=Object(i.a)(h,2),g=M[0],m=M[1],S=Object(t.useState)(null),x=Object(i.a)(S,2),R=x[0],C=x[1],P=Object(t.useState)(null),I=Object(i.a)(P,2),L=I[0],F=I[1],q=function(e){var l=Q(e);null!==l&&F(l)},z=function(){u([[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null]]),m("red"),d(["red","red","red","red","red","red"]),v(["blue","blue","blue","blue","blue","blue"]),F(null),C(null)},E=function(e,l){switch(e){case"onBoard":var t=N(r[l]),n=Object(i.a)(t,2),o=n[0],c=n[1];return void(-1!==c&&o===g&&(u((function(e){var r=e.slice();return r[l][c]="red"===o?"selectedRed":"selectedBlue",r})),C({aboutMe:"onBoard",place:l})));case"redTerritory":return void(s[l]===g&&(d((function(e){var r=e.slice();return r[l]="selectedRed",r})),C({aboutMe:"redTerritory",place:l})));case"blueTerritory":return void(p[l]===g&&(v((function(e){var r=e.slice();return r[l]="selectedBlue",r})),C({aboutMe:"blueTerritory",place:l})))}},J=function(e,l){null===L&&(null!==R?D(e,l):E(e,l))},D=function(e,l){if(null===R)throw console.error("One piece must be selected"),new Error;switch(e){case"onBoard":var t=N(r[l]),n=Object(i.a)(t,2),o=n[0],c=n[1],a=K();return null===o?(u((function(e){var r=e.slice();return r[l][a]=g,r=H(r),q(r),r})),void m("red"===g?"blue":"red")):"selectedRed"===o||"selectedBlue"===o?void G():a>c?(u((function(e){var r=e.slice();return r[l][a]=g,r=H(r),q(r),r})),void m("red"===g?"blue":"red")):void("redTerritory"!==R.aboutMe&&"blueTerritory"!==R.aboutMe||o!==g||(G(),E("onBoard",l)));case"redTerritory":return"blue"===g?void 0:"redTerritory"===R.aboutMe&&R.place===l?void G():"redTerritory"===R.aboutMe&&R.place!==l?(G(),void("red"===s[l]&&(d((function(e){var r=e.slice();return r[l]="selectedRed",r})),C({aboutMe:"redTerritory",place:l})))):"onBoard"===R.aboutMe?(G(),void E("redTerritory",l)):void 0;case"blueTerritory":if("red"===g)return;if("blueTerritory"===R.aboutMe&&R.place===l)return void G();if("blueTerritory"===R.aboutMe&&R.place!==l)return G(),void("blue"===p[l]&&(v((function(e){var r=e.slice();return r[l]="selectedBlue",r})),C({aboutMe:"blueTerritory",place:l})));if("onBoard"===R.aboutMe)return G(),void E("blueTerritory",l)}},H=function(e){if(null===R)return e;if("onBoard"===R.aboutMe){var l=N(e[R.place]),r=Object(i.a)(l,2),t=r[0],n=r[1];return"selectedRed"!==t&&"selectedBlue"!==t||(e[R.place][n]=null),C(null),e}return A(),e},A=function(){null!==R&&("redTerritory"===R.aboutMe?d((function(e){var l=e.slice();return l[R.place]=null,C(null),l})):v((function(e){var l=e.slice();return l[R.place]=null,C(null),l})))},G=function(){if(null!==R){if("onBoard"===R.aboutMe)return u((function(e){var l=e.slice(),t=N(r[R.place]),n=Object(i.a)(t,2)[1];return l[R.place][n]=g,l})),void C(null);"redTerritory"===R.aboutMe?d((function(e){var l=e.slice();return l[R.place]=g,l})):v((function(e){var l=e.slice();return l[R.place]=g,l})),C(null)}},K=function(){if(null===R)return-1;if("onBoard"===R.aboutMe){var e=N(r[R.place]);return Object(i.a)(e,2)[1]}return Math.floor(R.place/2)},N=function(e){for(var l=2;l>-1;l--)if(null!==e[l])return[e[l],l];return[null,-1]},Q=function(e){for(var l=e.slice().map((function(e){return null!==e[2]?e[2]:null!==e[1]?e[1]:null!==e[0]?e[0]:null})),r=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],t=null,n=0;n<r.length;n++){var u=Object(i.a)(r[n],3),o=u[0],c=u[1],a=u[2];if(l[o]&&l[o]===l[c]&&l[o]===l[a]){if(null!==t)return"red"===g?"blue":"red";t=l[o]}}return t};return Object(a.b)("div",{css:B},Object(a.b)(b.a,{camera:{fov:75,near:.1,far:1e3,position:[0,4,0]}},Object(a.b)("axesHelper",null),Object(a.b)("ambientLight",{intensity:.1}),Object(a.b)("directionalLight",{position:[-2,2,-2.1],intensity:.2}),Object(a.b)("directionalLight",{position:[2,2,2],intensity:.6}),"red"===L?Object(a.b)(n.a.Suspense,{fallback:null},Object(a.b)(w,{onClick:z,color:"red",position:[.4,0,-1.7]}),Object(a.b)(T,{position:[0,0,-1.7],onClick:z,color:"red",scale:.45})):"red"===g&&null===L?Object(a.b)(n.a.Suspense,{fallback:null},Object(a.b)(O,{color:"red",position:[.4,0,-1.7]}),Object(a.b)(T,{position:[0,0,-1.7],scale:.45,color:"silver"})):null,Object(a.b)(k,{handled:s,aboutMe:"redTerritory",clickMethod:J}),Object(a.b)(y,{situation:r,clickMethod:J}),Object(a.b)(k,{handled:p,aboutMe:"blueTerritory",clickMethod:J}),"blue"===L?Object(a.b)(n.a.Suspense,{fallback:null},Object(a.b)(w,{onClick:z,color:"blue",position:[-.35,0,1.85],scale:.9}),Object(a.b)(T,{onClick:z,position:[0,0,1.8],color:"blue",scale:.45})):"blue"===g&&null===L?Object(a.b)(n.a.Suspense,{fallback:null},Object(a.b)(O,{color:"blue",position:[-.4,0,1.8]}),Object(a.b)(T,{position:[0,0,1.8],scale:.45,color:"silver"})):null))},C=function(){return Object(a.b)("div",{css:P},Object(a.b)(R,null))},P=Object(a.a)(x||(x=Object(c.a)(["\n  width: max(500px, 100%);\n  height: 1000px;\n"]))),I=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,48)).then((function(l){var r=l.getCLS,t=l.getFID,n=l.getFCP,u=l.getLCP,o=l.getTTFB;r(e),t(e),n(e),u(e),o(e)}))};o.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(C,{})}),document.getElementById("root")),I()}},[[45,1,2]]]);
//# sourceMappingURL=main.a69eff28.chunk.js.map